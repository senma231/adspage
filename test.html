<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€å†…å®¹æµ‹è¯• - TechLife Blog</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .loading { background: #fff3cd; color: #856404; }
        .blog-posts, .popular-posts { margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 4px; }
        .api-status { position: fixed; top: 10px; right: 10px; padding: 5px 10px; background: #28a745; color: white; border-radius: 4px; font-size: 12px; opacity: 0; transition: opacity 0.3s ease; }
        .api-status.show { opacity: 1; }
        .api-status.loading { background: #ffc107; color: #000; }
        .api-status.error { background: #dc3545; }
        .api-status.success { background: #28a745; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="api-status" id="apiStatus">Loading content...</div>
    
    <div class="test-container">
        <h1>ğŸ§ª åŠ¨æ€å†…å®¹ç³»ç»Ÿæµ‹è¯•</h1>
        
        <div class="controls">
            <button onclick="testAPIs()">æµ‹è¯•APIè¿æ¥</button>
            <button onclick="loadFreshContent()">åŠ è½½æ–°å†…å®¹</button>
            <button onclick="showCacheStatus()">æ˜¾ç¤ºç¼“å­˜çŠ¶æ€</button>
            <button onclick="clearCache()">æ¸…é™¤ç¼“å­˜</button>
        </div>
        
        <div id="testResults"></div>
        
        <h3>ğŸ“° Popular Posts (ä¾§è¾¹æ æµ‹è¯•)</h3>
        <ul class="popular-posts">
            <li>ç­‰å¾…å†…å®¹åŠ è½½...</li>
        </ul>
        
        <h3>ğŸ“ Latest Articles (ä¸»å†…å®¹æµ‹è¯•)</h3>
        <div class="blog-posts">
            <p>ç­‰å¾…å†…å®¹åŠ è½½...</p>
        </div>
        
        <h3>ğŸ“Š Tech Reviews (è¯„æµ‹å†…å®¹æµ‹è¯•)</h3>
        <div id="reviews" class="section">
            <div class="blog-posts">
                <p>ç­‰å¾…å†…å®¹åŠ è½½...</p>
            </div>
        </div>
    </div>

    <script src="content-loader.js"></script>
    <script>
        // æµ‹è¯•å‡½æ•°
        async function testAPIs() {
            const results = document.getElementById('testResults');
            results.innerHTML = '<div class="loading">æ­£åœ¨æµ‹è¯•APIè¿æ¥...</div>';
            
            const tests = [
                { name: 'Dev.to API', url: 'https://dev.to/api/articles?tag=javascript&top=7' },
                { name: 'GitHub API', url: 'https://api.github.com/search/repositories?q=language:javascript+stars:>100&sort=updated&per_page=3' },
                { name: 'RSSè½¬JSON', url: 'https://api.rss2json.com/v1/api.json?rss_url=https://techcrunch.com/feed/' }
            ];
            
            let testHTML = '<h4>APIæµ‹è¯•ç»“æœ:</h4>';
            
            for (const test of tests) {
                try {
                    const response = await fetch(test.url);
                    if (response.ok) {
                        const data = await response.json();
                        testHTML += `<div class="success">âœ… ${test.name}: è¿æ¥æˆåŠŸ (${Array.isArray(data) ? data.length : (data.items ? data.items.length : 'N/A')} æ¡ç›®)</div>`;
                    } else {
                        testHTML += `<div class="error">âŒ ${test.name}: HTTP ${response.status}</div>`;
                    }
                } catch (error) {
                    testHTML += `<div class="error">âŒ ${test.name}: ${error.message}</div>`;
                }
            }
            
            results.innerHTML = testHTML;
        }
        
        async function loadFreshContent() {
            if (window.techContentLoader) {
                await window.techContentLoader.loadContent();
            } else {
                alert('å†…å®¹åŠ è½½å™¨æœªåˆå§‹åŒ–');
            }
        }
        
        function showCacheStatus() {
            if (window.techContentLoader && window.techContentLoader.cache.data) {
                const cacheAge = Date.now() - window.techContentLoader.cache.timestamp;
                alert(`ç¼“å­˜çŠ¶æ€: ${window.techContentLoader.cache.data.length} æ¡å†…å®¹, ${Math.floor(cacheAge/1000/60)} åˆ†é’Ÿå‰ç¼“å­˜`);
            } else {
                alert('æ— ç¼“å­˜æ•°æ®');
            }
        }
        
        function clearCache() {
            if (window.techContentLoader) {
                window.techContentLoader.cache = { data: null, timestamp: null, duration: 30 * 60 * 1000 };
                alert('ç¼“å­˜å·²æ¸…é™¤');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºçŠ¶æ€
        window.addEventListener('load', () => {
            setTimeout(() => {
                const status = window.techContentLoader ? 'åŠ¨æ€å†…å®¹ç³»ç»Ÿå·²åŠ è½½' : 'åŠ¨æ€å†…å®¹ç³»ç»ŸåŠ è½½å¤±è´¥';
                document.getElementById('testResults').innerHTML = `<div class="${window.techContentLoader ? 'success' : 'error'}">${status}</div>`;
            }, 2000);
        });
    </script>
</body>
</html>